<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title></title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
.box-1 {
    width: 100px;
    height: 100px;
    background-color: lightblue;
    opacity: 0;
}

.box-2 {
    width: 100px;
    height: 100px;
    background-color: lightgreen;
    position: absolute;
    top: 20px;
    right: 40px;
}

</style>

</head>
<body>

<div class="box-1"></div>
<div class="box-2"></div>


<script src="https://cdn.flashtalking.com/frameworks/js/gsap/1.17.0/TweenLite.min.js"></script>
<script src="https://cdn.flashtalking.com/frameworks/js/gsap/1.17.0/easing/EasePack.min.js"></script>
<script src="https://cdn.flashtalking.com/frameworks/js/gsap/1.17.0/plugins/CSSPlugin.min.js"></script>
<script src="https://cdn.flashtalking.com/frameworks/js/gsap/1.17.0/TimelineLite.min.js"></script>

<script>


var myTimeline = new TimelineLite({paused:true});
myTimeline.fromTo ('.box-1', 1.5, {opacity:0, scale:5, rotation:-720, x:'+30', y:'-20'}, {opacity:1, scale:1, rotation:0, x:0, y:0});


var otherTimeline = new TimelineLite({paused:true});
otherTimeline.fromTo ('.box-2', 0.5, {rotation: 0, y:20}, {rotation: 45, y:100});

var Scrubber = (function() {

    var scrubberCount = 0,
        cssLoaded = false;

    function initScrubber(timeline, label) {
        scrubberCount++;

        var scrubberID = 'scrubber-wrapper-' + scrubberCount;
        timeline.eventCallback('onUpdate', function() { updateSlider(this, scrubberID); });

        injectScrubberCSS();
        injectScrubberHTML(scrubberID, label);
        addScrubberEvents(timeline, scrubberID);
    }

    function addScrubberEvents(timeline, scrubberID) {
        var scrubber = document.getElementById(scrubberID);
        scrubber.getElementsByClassName('duration')[0].innerHTML = timeline.duration();

        scrubber.getElementsByClassName('play')[0].addEventListener('click',function() {
            if (timeline.progress() !== 1) {
                timeline.play();
            } else {
                timeline.restart();
            }
        });

        scrubber.getElementsByClassName('pause')[0].addEventListener(   'click', function() { timeline.pause();   });
        scrubber.getElementsByClassName('resume')[0].addEventListener(  'click', function() { timeline.resume();  });
        scrubber.getElementsByClassName('reverse')[0].addEventListener( 'click', function() { timeline.reverse(); });
        scrubber.getElementsByClassName('restart')[0].addEventListener( 'click', function() { timeline.restart(); });

        scrubber.getElementsByClassName('slider')[0].addEventListener('input',function() {
            timeline.pause();
            timeline.progress( this.value/100 );
        });
    }

    function updateSlider(timeline, scrubberID) {
        var timelineProgress = (timeline.progress() * 100).toFixed();
        var currentScrubber = document.getElementById(scrubberID);
        currentScrubber.getElementsByClassName('slider')[0].value = timelineProgress;
        currentScrubber.getElementsByClassName('progress')[0].innerHTML = timelineProgress;
        currentScrubber.getElementsByClassName('time')[0].innerHTML = timeline.time().toFixed(2);
    }

    function injectScrubberCSS() {
        if (!cssLoaded) {
            var scrubberCSS = '' +
                '#scrubber         { margin: 20px 10px; z-index: 9999; position: relative; }' +
                '#scrubber h1      { font-size: 110%; text-transform: uppercase; }' +
                '#scrubber button  { padding: 10px; margin-right: 10px; }' +
                '#scrubber .slider { margin: 20px 0; width: 500px; }';

            var styles = document.createElement('style');
            styles.appendChild(document.createTextNode(scrubberCSS));
            document.head.appendChild(styles);
            cssLoaded = true;
        }
    }

    function injectScrubberHTML(scrubberID, label) {
        label = label || 'Timeline';

        var scrubberHTML = '<div id="scrubber">' +
                '<h1 class="slider-label" for="slider"> ' + label + '</h1>' +
                '<button class="play">play</button>' +
                '<button class="pause">pause</button>' +
                '<button class="resume">resume</button>' +
                '<button class="reverse">reverse</button>' +
                '<button class="restart">restart</button>' +
                '<div><input type="range" class="slider" min="0" max="100" value="0"></div>' +
                '<div>Progress: <span class="progress">0</span>%</div>' +
                '<div>Time: <span class="time">0.00</span>s</div>' +
                '<div>Duration: <span class="duration">0.00</span>s</div>' +
            '</div>';

        var scrubberWrapper = document.createElement('div');
        scrubberWrapper.setAttribute('id', scrubberID);
        scrubberWrapper.innerHTML = scrubberHTML;
        document.body.appendChild(scrubberWrapper);
    }

    var publicAPI = {
        init: initScrubber
    }

    return publicAPI;

})();

Scrubber.init(myTimeline);
Scrubber.init(otherTimeline, 'animation 2');

</script>


</body>
</html>
